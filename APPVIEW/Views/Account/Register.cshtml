@model APPVIEW.ViewModels.RegisterVm

@{
    Layout = null;
}

<!DOCTYPE html>

<html lang="en"
      class="light-style layout-wide customizer-hide"
      dir="ltr"
      data-theme="theme-default"
      data-assets-path="../contentadmin/assets/"
      data-template="vertical-menu-template-free">
<head>
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Register </title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/contentadmin/assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&ampdisplay=swap"
          rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">

    <link rel="stylesheet" href="~/contentadmin/assets/vendor/fonts/materialdesignicons.css" />

    <!-- Menu waves for no-customizer fix -->
    <link rel="stylesheet" href="~/contentadmin/assets/vendor/libs/node-waves/node-waves.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="~/contentadmin/assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="~/contentadmin/assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="~/contentadmin/assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="~/contentadmin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <!-- Page CSS -->
    <!-- Page -->
    <link rel="stylesheet" href="~/contentadmin/assets/vendor/css/pages/page-auth.css" />

    <!-- Helpers -->
    <script src="~/contentadmin/assets/vendor/js/helpers.js"></script>
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="~/contentadmin/assets/js/config.js"></script>
</head>

<body>
    <!-- Content -->

    <div class="position-relative">
        <div class="authentication-wrapper authentication-basic container-p-y">
            <div class="authentication-inner py-4">
                <!-- Thẻ Đăng ký -->
                <div class="card p-2">
                    <!-- Logo -->
                    <div class="app-brand justify-content-center mt-5">
                        <a href="index.html" class="app-brand-link gap-2">
                            <span class="app-brand-logo demo">
                                <span style="color: var(--bs-primary)">
                                    <svg width="30" height="24" viewBox="0 0 250 196" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M12.3002 1.25469L56.655 28.6432C59.0349 30.1128 60.4839 32.711 60.4839 35.5089V160.63C60.4839 163.468 58.9941 166.097 56.5603 167.553L12.2055 194.107C8.3836 196.395 3.43136 195.15 1.14435 191.327C0.395485 190.075 0 188.643 0 187.184V8.12039C0 3.66447 3.61061 0.0522461 8.06452 0.0522461C9.56056 0.0522461 11.0271 0.468577 12.3002 1.25469Z"
                                              fill="currentColor" />
                                        <path opacity="0.077704"
                                              fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M0 65.2656L60.4839 99.9629V133.979L0 65.2656Z"
                                              fill="black" />
                                        <path opacity="0.077704"
                                              fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M0 65.2656L60.4839 99.0795V119.859L0 65.2656Z"
                                              fill="black" />
                                        <path fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M237.71 1.22393L193.355 28.5207C190.97 29.9889 189.516 32.5905 189.516 35.3927V160.631C189.516 163.469 191.006 166.098 193.44 167.555L237.794 194.108C241.616 196.396 246.569 195.151 248.856 191.328C249.605 190.076 250 188.644 250 187.185V8.09597C250 3.64006 246.389 0.027832 241.935 0.027832C240.444 0.027832 238.981 0.441882 237.71 1.22393Z"
                                              fill="currentColor" />
                                        <path opacity="0.077704"
                                              fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M250 65.2656L189.516 99.8897V135.006L250 65.2656Z"
                                              fill="black" />
                                        <path opacity="0.077704"
                                              fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M250 65.2656L189.516 99.0497V120.886L250 65.2656Z"
                                              fill="black" />
                                        <path fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M12.2787 1.18923L125 70.3075V136.87L0 65.2465V8.06814C0 3.61223 3.61061 0 8.06452 0C9.552 0 11.0105 0.411583 12.2787 1.18923Z"
                                              fill="currentColor" />
                                        <path fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M12.2787 1.18923L125 70.3075V136.87L0 65.2465V8.06814C0 3.61223 3.61061 0 8.06452 0C9.552 0 11.0105 0.411583 12.2787 1.18923Z"
                                              fill="white"
                                              fill-opacity="0.15" />
                                        <path fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M237.721 1.18923L125 70.3075V136.87L250 65.2465V8.06814C250 3.61223 246.389 0 241.935 0C240.448 0 238.99 0.411583 237.721 1.18923Z"
                                              fill="currentColor" />
                                        <path fill-rule="evenodd"
                                              clip-rule="evenodd"
                                              d="M237.721 1.18923L125 70.3075V136.87L250 65.2465V8.06814C250 3.61223 246.389 0 241.935 0C240.448 0 238.99 0.411583 237.721 1.18923Z"
                                              fill="white"
                                              fill-opacity="0.3" />
                                    </svg>
                                </span>
                            </span>
                            <span class="app-brand-text demo text-heading fw-semibold">Supper Fashion</span>
                        </a>
                    </div>
                    <!-- /Logo -->
                    <div class="card-body mt-2">
                        <h4 class="mb-2">Cuộc phiêu lưu bắt đầu từ đây 🚀</h4>
                        @if (!string.IsNullOrEmpty(ViewData["ErrorMessage"] as string))
                        {
                            <div class="alert alert-warning alert-dismissible" role="alert">
                                @ViewData["ErrorMessage"]
                            </div>
                        }
                        else if (!string.IsNullOrEmpty(ViewData["Sucsess"] as string))
                        {
                            <div class="alert alert-success" role="alert">
                                @ViewData["Sucsess"]
                            </div>
                        }
                        <p class="mb-4">Đăng ký</p>

                        <form asp-action="Register" id="formAuthentication" class="mb-3" method="POST" onsubmit="return validateForm()">
                            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                            <div class="form-floating form-floating-outline mb-3">
                                <input asp-for="Name" type="text" class="form-control" id="name" name="Name" placeholder="Nhập tên của bạn" />
                                <label for="name">Tên</label>
                                <span id="nameError" class="text-danger"></span>
                            </div>
                            <div class="form-floating form-floating-outline mb-3">
                                <input asp-for="Email" type="email" class="form-control" id="email" name="email" placeholder="Nhập email của bạn" />
                                <label for="email">Email</label>
                            </div>
                            <div class="form-floating form-floating-outline mb-3">
                                <input asp-for="PhoneNumber" type="text" class="form-control" id="phone" name="phonenumber" placeholder="Nhập số điện thoại của bạn" />
                                <span id="phoneError" class="text-danger"></span>
                                <label for="phone">Số điện thoại</label>
                            </div>
                            <div class="mb-3 form-password-toggle">
                                <div class="input-group input-group-merge">
                                    <div class="form-floating form-floating-outline">
                                        <input asp-for="Password"
                                               type="password"
                                               id="password"
                                               class="form-control"
                                               name="password"
                                               placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;"
                                               aria-describedby="password" />
                                        <span id="passError" class="text-danger"></span>
                                        <label for="password">Mật khẩu</label>
                                    </div>
                                    <span id="passwordError" class="input-group-text cursor-pointer"><i class="mdi mdi-eye-off-outline"></i></span>
                                </div>
                            </div>
                            <div class="mb-3 form-password-toggle">
                                <div class="input-group input-group-merge">
                                    <div class="form-floating form-floating-outline">
                                        <input asp-for="ConfirmPassword"
                                               type="password"
                                               id="confirmpassword"
                                               class="form-control"
                                               name="ConfirmPassword"
                                               placeholder="&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;&#xb7;"
                                               aria-describedby="password" />

                                        <label for="password">Xác nhận mật khẩu</label>
                                        <span id="cofpassError" class="text-danger"></span>
                                    </div>
                                    <span class="input-group-text cursor-pointer"><i class="mdi mdi-eye-off-outline"></i></span>
                                </div>
                            </div>
                            <div class="mb-3">
                                <button class="btn btn-primary d-grid w-100" type="submit">Đăng ký</button>
                            </div>
                        </form>
                        <div class="text-center">
                            <a href="#" class="d-flex align-items-center justify-content-center" onclick="goBack()">
                                <i class="mdi mdi-chevron-left scaleX-n1-rtl mdi-24px"></i>
                                Hủy bỏ
                            </a>
                            <script>
                                function goBack() {
                                    window.history.back();
                                }
                            </script>
                        </div>
                        <p class="text-center">
                            <span>Đã có tài khoản?</span>
                            <a href="~/Account/Login">
                                <span>Đăng nhập ngay</span>
                            </a>
                        </p>
                    </div>
                </div>
                <!-- /Thẻ Đăng ký -->
                <!-- Hình ảnh minh họa -->
                <img src="~/contentadmin/assets/img/illustrations/tree-3.png"
                     alt="auth-tree"
                     class="authentication-image-object-left d-none d-lg-block" />
                <img src="~/contentadmin/assets/img/illustrations/auth-basic-mask-light.png"
                     class="authentication-image d-none d-lg-block"
                     alt="triangle-bg"
                     data-app-light-img="illustrations/auth-basic-mask-light.png"
                     data-app-dark-img="illustrations/auth-basic-mask-dark.png" />
                <img src="~/contentadmin/assets/img/illustrations/tree.png"
                     alt="auth-tree"
                     class="authentication-image-object-right d-none d-lg-block" />
                <!-- /Hình ảnh minh họa -->
            </div>
        </div>
    </div>


    <!-- / Content -->
    <!-- Core JS -->
    <!-- build:js contentadmin/assets/vendor/js/core.js -->
    <script src="~/contentadmin/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="~/contentadmin/assets/vendor/libs/popper/popper.js"></script>
    <script src="~/contentadmin/assets/vendor/js/bootstrap.js"></script>
    <script src="~/contentadmin/assets/vendor/libs/node-waves/node-waves.js"></script>
    <script src="~/contentadmin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="~/contentadmin/assets/vendor/js/menu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.js"></script>

    <!-- endbuild -->
    <!-- Vendors JS -->
    <!-- Main JS -->
    <script src="~/contentadmin/assets/js/main.js"></script>

    <!-- Page JS -->
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var phoneNumberInput = document.getElementById('phone');
        var phoneErrorSpan = document.getElementById('phoneError');

        phoneNumberInput.addEventListener('input', function () {
            var inputValue = phoneNumberInput.value;
            var cleanedValue = inputValue.replace(/[^0-9+]/g, '');
            cleanedValue = cleanedValue.slice(0, 10);
            phoneNumberInput.value = cleanedValue;
        });

        phoneNumberInput.addEventListener('blur', function () {
            validatePhoneNumber(phoneNumberInput.value);
        });

        function validatePhoneNumber(phoneNumber) {
            var phoneRegex = /^\+?[0-9]{1,4}-?[0-9]{3,4}-?[0-9]{4,}$/;

            if (phoneRegex.test(phoneNumber) && phoneNumber.startsWith('0')) {
                // Nếu số điện thoại hợp lệ, ẩn thông báo và hiển thị nền trắng cho ô nhập
                phoneErrorSpan.textContent = '';
                phoneNumberInput.style.backgroundColor = 'white';
            } else {
                if (phoneNumber.length < 10) {
                    // Hiển thị thông báo trong thẻ span khi số điện thoại có ít hơn 10 kí tự
                    phoneErrorSpan.textContent = 'Số điện thoại phải có ít nhất 10 kí tự.';
                } else if (!phoneNumber.startsWith('0')) {
                    // Hiển thị thông báo trong thẻ span khi số điện thoại không bắt đầu bằng số 0
                    phoneErrorSpan.textContent = 'Số điện thoại phải bắt đầu bằng số 0.';
                } else {
                    // Hiển thị thông báo trong thẻ span khi số điện thoại không hợp lệ
                    phoneErrorSpan.textContent = 'Số điện thoại không hợp lệ.';
                }


            }
        }
    });

    //Check Null
    function validateForm() {
        var name = document.getElementById('name').value;
        var email = document.getElementById('email').value;
        var phone = document.getElementById('phone').value;
        var password = document.getElementById('password').value;
        var confirmPassword = document.getElementById('confirmpassword').value;

        // Lấy thẻ span thông báo lỗi
        var phoneErrorSpan = document.getElementById('phoneError');
        var EmailErrorSpan = document.getElementById('emailError');
        var PassErrorSpan = document.getElementById('passError');
        var CofPassErrorSpan = document.getElementById('cofpassError');
        var NameErrorSpan = document.getElementById('nameError');
        //

        // Kiểm tra xem các trường có rỗng hay không
        if (name.trim() === '' || email.trim() === '' || phone.trim() === '' || password.trim() === '' || confirmPassword.trim() === '') {
            // alert('Vui lòng nhập đầy đủ thông tin.');
            Swal.fire({
                title: "Hãy điền đầy đủ thông tin",
                icon: "warning",
                confirmButtonText: "Ok"
            })
            return false; // Ngăn chặn form submit
        }

        // ... Các kiểm tra khác
        var phoneRegex = /^\+?[0-9]{1,4}-?[0-9]{3,4}-?[0-9]{4,}$/;
        if (!phoneRegex.test(phone)) {
            phoneErrorSpan.textContent = 'Số điện thoại không hợp lệ!'
            return false;
        } else if (!phone.startsWith('0')) {
            phoneErrorSpan.textContent = 'Số điện thoại Số điện thoại phải bắt đầu bằng số 0!'
            return false;
        } else if (phone.length < 10) {
            phoneErrorSpan.textContent = 'Số điện thoại Số điện thoại phải đủ 10 kí tự!'
            return false;
        } else {
            phoneErrorSpan.textContent = '';
           
        }

        if (name.length >50) {
            NameErrorSpan.textContent = 'Không được nhập quá 50 kí tự';
            return false;
        }
        if (password != confirmPassword) {
            PassErrorSpan.textContent = "Mật khẩu không trùng khớp";
           
            return false
        } else {
            // Nếu mật khẩu khớp, xóa cả hai thông báo lỗi
            PassErrorSpan.textContent = "";
            CofPassErrorSpan.textContent = "";
        }
      

        return true; // Cho phép form submit
    }

    //Mật khẩu
    document.getElementById('password').addEventListener('input', function () {
        var password = this.value;
        var passwordPattern = /^(?!.*\s)(.{8,})$/;
        var passwordErrorSpan = document.getElementById('passwordError');

        if (passwordPattern.test(password)) {
            // Mật khẩu hợp lệ, xóa thông báo lỗi
            passwordErrorSpan.textContent = '';
        } else {
            // Mật khẩu không hợp lệ, hiển thị thông báo lỗi
            passwordErrorSpan.textContent = 'Mật khẩu phải có ít nhất 8 ký tự và không chứa khoảng trắng';
        }
    });


</script>

